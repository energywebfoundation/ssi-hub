# Changelog

All notable changes to this project will be documented in this file. See [standard-version](https://github.com/conventional-changelog/standard-version) for commit guidelines.

## [0.0.2](https://github.com/energywebfoundation/iam-cache-server/pull/156) (2021-09-16)

### Features

- **app:** migrate from dgraph to postgres ([7be1437](https://github.com/energywebfoundation/iam-cache-server/commit/7be1437c08e75d913a49c1152058ea891766834b))
- **app:** migrate from dgraph to postgres ([2591cf9](https://github.com/energywebfoundation/iam-cache-server/commit/2591cf9bb6bdbf4d6e5efce3367f2db4e453fa17))
- **app:** refactor to use modules ([18b3217](https://github.com/energywebfoundation/iam-cache-server/commit/18b3217b2bd3222841a5cdc3a3940e6887887e47))
- **app:** refactor to use modules ([a6a5a65](https://github.com/energywebfoundation/iam-cache-server/commit/a6a5a659ba78ee51d9f886a3a6b92887af1cedcb))
- **assets:** add assets caching ([443ab5a](https://github.com/energywebfoundation/iam-cache-server/commit/443ab5a9565fd5b0fae66869d345199ab2d6bb6e))
- **auth:** accept refresh token in query params ([fbf4918](https://github.com/energywebfoundation/iam-cache-server/commit/fbf4918b6773961186b9906668b6a3f1544501dd))
- **auth:** accept refresh token in query params ([5fff3c8](https://github.com/energywebfoundation/iam-cache-server/commit/5fff3c825dd6b6875dd1b55cae9ccc940926002a))
- **auth:** add option to disable auth ([40119fc](https://github.com/energywebfoundation/iam-cache-server/commit/40119fc42e3035687d7d81f84865549d18baa80e))
- **auth:** add option to disable auth ([6432c7c](https://github.com/energywebfoundation/iam-cache-server/commit/6432c7cd30f009c73ace19ca2912aabbf3aaa72e))
- **auth:** add refresh token implementation ([ac375a6](https://github.com/energywebfoundation/iam-cache-server/commit/ac375a626d1416e4d9771239f8fc53550d328a4e))
- **auth:** add refresh token implementation ([aa22c03](https://github.com/energywebfoundation/iam-cache-server/commit/aa22c03a22093322af93014880d3f72d9d79dc84))
- **auth:** change error when origins not matched ([d109990](https://github.com/energywebfoundation/iam-cache-server/commit/d109990f8457e7ec115548f4b98ba064c2f09191))
- **auth:** protect deleting endpoint ([3937667](https://github.com/energywebfoundation/iam-cache-server/commit/39376679dcad5fb701aeee54fbb2b33bcba2474f))
- **auth:** protect deleting endpoint ([a819447](https://github.com/energywebfoundation/iam-cache-server/commit/a819447f2aa87022beb443279580d644c89c32e8))
- **cache_serevr.test:** setting deployment with docker-compose.dev.yml file ([e812d64](https://github.com/energywebfoundation/iam-cache-server/commit/e812d6457f5b44f4338b5c1b1b1dc8aacf8b0f1e))
- **cache_server_tester:** Setting Github actions to run automated tests on prod environment ([1689ba0](https://github.com/energywebfoundation/iam-cache-server/commit/1689ba02c4576e4be632725706a97ed9c93738b4))
- **cache_server.test:** Running docker build without docker-compose.dev.yml ([0f17a04](https://github.com/energywebfoundation/iam-cache-server/commit/0f17a047208cebf59f08a6e0d9b3de1e68f114ab))
- **Cache_server.test:** updating docker commands on build & run ([73aa802](https://github.com/energywebfoundation/iam-cache-server/commit/73aa8026aa40b53801a379de3917d8922b2fc850))
- **cache_server.test:** using github env values in GHA ([fe598dd](https://github.com/energywebfoundation/iam-cache-server/commit/fe598dd68acbeff629f3f2631a9946b1d0d2d6e6))
- **claim.dto:** requiring stringNumber claimTypeVersion ([f7061fb](https://github.com/energywebfoundation/iam-cache-server/commit/f7061fb7364171509f97573c1c496bdae2f9fa07))
- **claim:** add enrolment preconditions ([4f3a991](https://github.com/energywebfoundation/iam-cache-server/commit/4f3a9910b64a4c6fbb51999c8e37e8f69d24c531))
- **claim:** add enrolment preconditions ([89a1408](https://github.com/energywebfoundation/iam-cache-server/commit/89a140808218da80dee7b4178ceb1031f02927bf))
- **claim:** authorize claim access ([afcc18d](https://github.com/energywebfoundation/iam-cache-server/commit/afcc18d2c0a018b028903cfcc15604d5e092ca31))
- **claim:** extract subject from token ([85205ea](https://github.com/energywebfoundation/iam-cache-server/commit/85205ea00794c12857c50b02384333c1e1f3500a))
- **claim:** get by subjects endpoint ([bf984e7](https://github.com/energywebfoundation/iam-cache-server/commit/bf984e72ea333e57b775625afbd29da620e4222f))
- **claims:** add claim registration types ([72d190c](https://github.com/energywebfoundation/iam-cache-server/commit/72d190c32048a7a3e841e429803e8c6b3acfc98e))
- **claims:** ignore claimIssuer ([4e10372](https://github.com/energywebfoundation/iam-cache-server/commit/4e10372cbedf2e68d191e5268606a6a8b32ef8fd))
- **claims:** migrate claim subject ([fcdb744](https://github.com/energywebfoundation/iam-cache-server/commit/fcdb744802684851350e1bb7e052d9a2f6e781f5))
- **claims:** optimize filter roles by namespace ([b2dcaa5](https://github.com/energywebfoundation/iam-cache-server/commit/b2dcaa501f0e09abd0f4047ffbc17d3790154b88))
- **claims:** persist onchain proof ([b2f95b3](https://github.com/energywebfoundation/iam-cache-server/commit/b2f95b361684b34620a77920125cac2f28d47725))
- **claims:** persist subject agreement ([94e1b33](https://github.com/energywebfoundation/iam-cache-server/commit/94e1b338facfba9cf6ddd15afb26a4c24b17ad99))
- **cookies:** add option to store token in cookies ([90a18c5](https://github.com/energywebfoundation/iam-cache-server/commit/90a18c5539a25894d710cf7ebae7da9d002192e6))
- **cookies:** add option to store token in cookies ([3ce077e](https://github.com/energywebfoundation/iam-cache-server/commit/3ce077e69116c3111015f091df9ef7abfeffb9e9))
- **deployment:** add travis deployment for production ([b985a4a](https://github.com/energywebfoundation/iam-cache-server/commit/b985a4a2defbcb3615c9daa9ef2947a5058b7b26))
- **did:** add universal resolver call for did document ([6ecd28b](https://github.com/energywebfoundation/iam-cache-server/commit/6ecd28bd6dd38cba4661f4e228b3d27272d60755))
- **did:** add universal resolver call for did document ([ea448bb](https://github.com/energywebfoundation/iam-cache-server/commit/ea448bb9b160ccba72723ff7d6a9eaa8daff77d9))
- **did:** add universal resolver docker deploy config ([7643cc2](https://github.com/energywebfoundation/iam-cache-server/commit/7643cc270ae08d701d8a58aa89cedcddd9376313))
- **did:** add universal resolver docker deploy config ([704d213](https://github.com/energywebfoundation/iam-cache-server/commit/704d213e292f609cb116b0e21ea29e174b6d6fd5))
- **docker-compose:** setting env variables ([03f8bbf](https://github.com/energywebfoundation/iam-cache-server/commit/03f8bbf76a241e112c6d73c126ab3e73baa028f9))
- **e2e test:** running basic test ([70e9d37](https://github.com/energywebfoundation/iam-cache-server/commit/70e9d3707f2c4676904af40f6cf521433d6790f0))
- **ens.service:** use RoleDefinitionReader from [@ew-iam](https://github.com/ew-iam) ([31d187f](https://github.com/energywebfoundation/iam-cache-server/commit/31d187f383ffff97cf3e8ddd8766a5db2dd20c9e))
- **env_file.dist:** setting AWS ECR variables ([a2b4963](https://github.com/energywebfoundation/iam-cache-server/commit/a2b4963a7ecedd52d4555722cc1b200ab5ea5f3e))
- **Github Workflow:** initial draft PR: ([b40f54a](https://github.com/energywebfoundation/iam-cache-server/commit/b40f54a5785b58e99891dc98287dc8928973c6b0))
- **graphQL:** add graphql api ([97a89ed](https://github.com/energywebfoundation/iam-cache-server/commit/97a89eddc8072eafa65340168098a57b5b3608d6))
- **graphQL:** add graphql api ([3e6ded9](https://github.com/energywebfoundation/iam-cache-server/commit/3e6ded9911dccf350a9ee4ca8b519f5b52f7d613))
- **logging:** add loggin to files and sentry integration ([6b1f8aa](https://github.com/energywebfoundation/iam-cache-server/commit/6b1f8aab6a7f638aab72f42059363fa1666b679c))
- **logging:** add loggin to files and sentry integration ([7c5a9c9](https://github.com/energywebfoundation/iam-cache-server/commit/7c5a9c96a4b61f62026c6ff85aac675fe394fb81))
- **owner:** return subOrgs from org owner endpoint ([9a0f406](https://github.com/energywebfoundation/iam-cache-server/commit/9a0f40610343488a36bca440e0640b4ce6dcede3))
- **owner:** return subOrgs from org owner endpoint ([9cb29d1](https://github.com/energywebfoundation/iam-cache-server/commit/9cb29d131b67dc27b53171799a75d89d84fa688e))
- **roleDefinition:** add validation properties to fields ([33a501d](https://github.com/energywebfoundation/iam-cache-server/commit/33a501dd9f5ce28cd07037cd8ed1755bbcb69138))
- **roleDefinition:** add validation properties to fields ([51bbf68](https://github.com/energywebfoundation/iam-cache-server/commit/51bbf682d607bc7c9144c45cd158dd16b0ee10cd))
- **role:** get all ([e50ac18](https://github.com/energywebfoundation/iam-cache-server/commit/e50ac1801ad58d9f6e1740b329f63f991c7847fa))

### Bug Fixes

- **assets:** query accepted and created assets ([1dc097f](https://github.com/energywebfoundation/iam-cache-server/commit/1dc097fc112db236892ab9d329c7df3112e87e5e))
- **assets:** update asset manager ([8b29f7f](https://github.com/energywebfoundation/iam-cache-server/commit/8b29f7facc9d89da40a237f2d290d6a3d4eafbf5))
- **auth:** login startegy unknown ([a37bcf4](https://github.com/energywebfoundation/iam-cache-server/commit/a37bcf475160f1272bf655ec92362de7ba5edab6))
- **auth:** login startegy unknown ([6943cbb](https://github.com/energywebfoundation/iam-cache-server/commit/6943cbb39a07196bea2a4fd12889b86a7517cf4f))
- **build:** fresh start ethers error ([e5bad9a](https://github.com/energywebfoundation/iam-cache-server/commit/e5bad9ab6693c13376ee55cfd5d582cc1e1af012))
- **build:** fresh start ethers error ([f5921d8](https://github.com/energywebfoundation/iam-cache-server/commit/f5921d8622ecd9ef34dcadc82783388189705d2f))
- **cache_server.test:** putting back usage of docker-compose.dev.yml ([cee5075](https://github.com/energywebfoundation/iam-cache-server/commit/cee50754506544accbbf26105c31eddb0ead2c36))
- **Cache_server.test:** update ([4992566](https://github.com/energywebfoundation/iam-cache-server/commit/4992566dc21a948c72031b6d5f3c68179155fc78))
- **cache_server.test:** updating docker build command ([e7391f1](https://github.com/energywebfoundation/iam-cache-server/commit/e7391f1cfb0a61e744e722e9c9ed2f2f84619cb7))
- **cache_server:** setting env_file for docker-compose ([76a4ad5](https://github.com/energywebfoundation/iam-cache-server/commit/76a4ad55c2254687abe724a2a67948ffaeccad7f))
- **cache_server:** setting env_file for docker-compose ([d5494f6](https://github.com/energywebfoundation/iam-cache-server/commit/d5494f6c06ad6295fef3d4a4735a2298736862d3))
- **cache_server:** setting env_file for docker-compose ([7bf3d9a](https://github.com/energywebfoundation/iam-cache-server/commit/7bf3d9ae73435725f6090bda3cc6413f6dae8ef5))
- **claim:** claim id from claim data ([a54406c](https://github.com/energywebfoundation/iam-cache-server/commit/a54406cddb0d1d9421b488f8be9bdbc2011db358))
- **claim.dto:** accomodating number and string claimTypeVersion ([889448f](https://github.com/energywebfoundation/iam-cache-server/commit/889448f5f3b566cf24b59f720f1777854c8c5aff))
- **claim.dto:** add registrationTypes and additional tests ([6225af1](https://github.com/energywebfoundation/iam-cache-server/commit/6225af185bb20210395bcd9979682be6fd023720))
- **claim.dto:** add subjectAgreement ([32b7771](https://github.com/energywebfoundation/iam-cache-server/commit/32b7771fccf84a2333fcd14876f71b1b9e66daf9))
- **claim:** dont filter by empty roles ([8d3a501](https://github.com/energywebfoundation/iam-cache-server/commit/8d3a501a165edff852d3aa6c20fe3e95dbff6dc5))
- **claim:** make issuedToken optional ([72bec0e](https://github.com/energywebfoundation/iam-cache-server/commit/72bec0e654ab384d02814862c172e611d68712fa))
- **claim:** rename parentNamespace ([90a7b09](https://github.com/energywebfoundation/iam-cache-server/commit/90a7b09e0b6799eefd47431a6369def7eddfe604))
- **claims:** add onChainProof in claim issue dto ([2f5f422](https://github.com/energywebfoundation/iam-cache-server/commit/2f5f4226ccf80abd40c1ea6673b9df96e1357d62))
- **claims:** check owned and offered assets before request claims ([e008eed](https://github.com/energywebfoundation/iam-cache-server/commit/e008eed2018757ac0ca6a8e9da05747eabe63ecf))
- **cookies:** samesite none cookie issue ([9e739a1](https://github.com/energywebfoundation/iam-cache-server/commit/9e739a1cc5c2d7c2976b30f3e9a9d7d90f611978))
- **cookies:** samesite none cookie issue ([4fb6a1b](https://github.com/energywebfoundation/iam-cache-server/commit/4fb6a1b02cbedeb28db8bbce8dd5a78ce7a0d980))
- correct event saved logs ([9bec9f6](https://github.com/energywebfoundation/iam-cache-server/commit/9bec9f616f120eb1f6edf41d0f540cfec54fca83))
- **db:** fix migration path config ([2dfd4cd](https://github.com/energywebfoundation/iam-cache-server/commit/2dfd4cda3007e66a37816b7dd5e513bb8ef316e8))
- **db:** fix migration path config ([e636932](https://github.com/energywebfoundation/iam-cache-server/commit/e636932fec79701d896a955985770cc2640597e9))
- **deploy:** fix deploy script ([04d5d19](https://github.com/energywebfoundation/iam-cache-server/commit/04d5d19800b47e7b4554a7d202e24df427936255))
- **deploy:** fix deploy script ([5704bd9](https://github.com/energywebfoundation/iam-cache-server/commit/5704bd9f3051b47a69de5fce1fad387012abc90e))
- **deploy:** fix package.json not synced with lock file ([1b89ca7](https://github.com/energywebfoundation/iam-cache-server/commit/1b89ca7c8e277a680c459b18d7b1b7c64abc456d))
- **deploy:** fix package.json not synced with lock file ([c59f78d](https://github.com/energywebfoundation/iam-cache-server/commit/c59f78d36e242775fa8dac1f5f1a20a17f66120e))
- **deploy:** fix scp port number env ([fa41d81](https://github.com/energywebfoundation/iam-cache-server/commit/fa41d818a806a1e9366b0d3bf59564fa54c1d1eb))
- **deploy:** fix scp port number env ([628ec86](https://github.com/energywebfoundation/iam-cache-server/commit/628ec86367a958a67907ebb30fa21cace19b1205))
- **dgraph:** fix dgraph migrations typo ([a47f3bc](https://github.com/energywebfoundation/iam-cache-server/commit/a47f3bc309f6e3fce57d81429d253ca8c73df943))
- **dgraph:** fix dgraph migrations typo ([2f372ec](https://github.com/energywebfoundation/iam-cache-server/commit/2f372ecc2dcf75d12ab000abbceb3ac5f83491b4))
- **did caching:** improving DID Document retrieval ([d4e8ae5](https://github.com/energywebfoundation/iam-cache-server/commit/d4e8ae5f058ac1d1359aa0a85621744baf71590d))

- **did.service:** await resolver.readFromBlock in getAllLogs ([4de329e](https://github.com/energywebfoundation/iam-cache-server/commit/4de329e002db12b511417aa2e1768d7c7a8e2325))
- **did.service:** handle trailing slash in UNIVERSAL_RESOLVER_CONFIG ([498f9f7](https://github.com/energywebfoundation/iam-cache-server/commit/498f9f775f97bae118f02923eddf75903f2fe8e7))
- **did.service:** only return IDIDDoc when getByID ([154d8b2](https://github.com/energywebfoundation/iam-cache-server/commit/154d8b2fbfb4f4cf72844b8f7f1e24a2285d4651))
- **did.service:** update ew-did-registry packages to fix parallel resolver read ([1c0dd24](https://github.com/energywebfoundation/iam-cache-server/commit/1c0dd2444662d1ed68798adb1e55acf8f21204c0))
- **docker-compose.prod.yml:** removing redundant values from port number ([7bb219d](https://github.com/energywebfoundation/iam-cache-server/commit/7bb219db23ca4d09e7762b8f18f6a72994e219c1))
- **docker-compose.prod.yml:** updating env_file ([b281f08](https://github.com/energywebfoundation/iam-cache-server/commit/b281f08060d960e9846611d02c8afd3d612efc0f))
- **docker-compose.prod.yml:** using local image ([53cdda2](https://github.com/energywebfoundation/iam-cache-server/commit/53cdda2fcb9f15f04fee69cccf5fc22fe7d9c6cb))
- **docker-compose.yml:** fixing building command ([a3c21d6](https://github.com/energywebfoundation/iam-cache-server/commit/a3c21d6628b55cb78baf79e56452b39755a43fe8))
- **ens.service:** domainReader for registry events ([aa51588](https://github.com/energywebfoundation/iam-cache-server/commit/aa51588f40dd5052d7dbc14e42751febcf34e919))
- **ens.service:** fix import of DomainNotifier from iam-contracts ([e84c292](https://github.com/energywebfoundation/iam-cache-server/commit/e84c292339baeda198871c2fbe8622741b361367))
- **GHA_workflow:** running build script for prod mode ([8faa015](https://github.com/energywebfoundation/iam-cache-server/commit/8faa015647e6eecdee65700c4c96287c425f1dcf))
- **GHA_workflow:** run jest from container ([981e87b](https://github.com/energywebfoundation/iam-cache-server/commit/981e87b164f6263b0510344aa61e7ab09e9dbe05))
- **graphql:** fix generating graphql schema ([fe6786a](https://github.com/energywebfoundation/iam-cache-server/commit/fe6786aa05bf8f7ef0425eb31f7b8e8fdc68a9f2))
- **graphql:** fix generating graphql schema ([48e1ade](https://github.com/energywebfoundation/iam-cache-server/commit/48e1adea063a0e59ee62992e736be4524892073a))
- **main:** iam cache server is not able to start ([c76d433](https://github.com/energywebfoundation/iam-cache-server/commit/c76d4330a93e2f42b444341703cceeecae337b7d))
- **main:** iam cache server is not able to start ([93c1383](https://github.com/energywebfoundation/iam-cache-server/commit/84fed98b16aa3f4caff14accd89fd9b61e2dd229))
- **precondtions:** precondtions need to have condtions prop ([25e38f6](https://github.com/energywebfoundation/iam-cache-server/commit/25e38f6a635d585ca40184a6d6b0fbab95c5b46e))
- **precondtions:** precondtions need to have condtions prop ([88575ac](https://github.com/energywebfoundation/iam-cache-server/commit/88575ac8b5a4280353a20d5dc38ecb60054719d6))
- **role.service:** check for empty conditions array ([d4b52ac](https://github.com/energywebfoundation/iam-cache-server/commit/d4b52acc62f12ee1c8a24c5421db665be2903fdc))
- **role.service:** check for empty conditions array ([1d446d3](https://github.com/energywebfoundation/iam-cache-server/commit/1d446d3de10422ec1f660d3209d5c2876589d61c))
- **sentry:** sentry not displaying maps ([3fe6a13](https://github.com/energywebfoundation/iam-cache-server/commit/3fe6a132c66fcc497f6d367c72eaa415d4911c34))
- **sentry:** sentry not displaying maps ([9c695e4](https://github.com/energywebfoundation/iam-cache-server/commit/9c695e41fe07902b71c07675f6325267a8565e95))
- **subOrgs:** not updating subOrgs definitions ([ee70734](https://github.com/energywebfoundation/iam-cache-server/commit/ee707344b4e85e0730692a4cf2a4c166c5a3b88a))
- **subOrgs:** not updating subOrgs definitions ([375ada4](https://github.com/energywebfoundation/iam-cache-server/commit/375ada46550ddc422dbcc03ba3eda41e7d6bd10e))

### BREAKING CHANGES

- **all endpoints:** updates all endpoints to use versioning
- **did.controller:** remove includeClaims param as not respected ([b8c7469](https://github.com/energywebfoundation/iam-cache-server/commit/b8c7469a6c42573fbc51f100dfca94613b21586c))
