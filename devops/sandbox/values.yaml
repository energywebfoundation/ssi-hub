iam-cache-server-helm:
  replicaCount: 1

  image:
    repository: "124847487737.dkr.ecr.us-west-2.amazonaws.com/ics-api"
    pullPolicy: IfNotPresent

  imagePullSecrets: [ ]
  nameOverride: "ics"
  fullnameOverride: "ics"

  serviceAccount:
    create: true
    annotations: { }
    name: ""

  podAnnotations: { }

  podSecurityContext: { }
  securityContext: { }

  service:
    type: NodePort
    port: 3000

  ingress:
    enabled: true
    annotations:
      kubernetes.io/ingress.class: alb
      alb.ingress.kubernetes.io/scheme: internet-facing
      alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}, {"HTTPS":443}]'
      alb.ingress.kubernetes.io/actions.ssl-redirect: '{"Type": "redirect", "RedirectConfig": { "Protocol": "HTTPS", "Port": "443", "StatusCode": "HTTP_301"}}'
      alb.ingress.kubernetes.io/certificate-arn: arn:aws:acm:us-west-2:124847487737:certificate/ff4589f5-fb2a-400c-a11a-bbd2e62da334
    hosts:
      - host: identitycache-sandbox.energyweb.org
        paths:
          - path: "/"
            pathType: Prefix
            backend:
              service:
                name: ssl-redirect
                port:
                  name: use-annotation
          - path: "/"
            pathType: Prefix
            backend:
              service:
                name: ics
                port:
                  number: 80
    tls: [ ]

  config:
    secretRefName: ics-secrets
    configRefName: ics-cm

  sealedSecret:
    enabled: true
    annotations: { }
    encryptedData:
      ENS_URL: AgCOvHU8r0IbH1ttK+m/MPFWAdKV1jnBu/viZCRpfso+VMIDJglTE+TmkttvIsLKhhn59UGfsVrvk85PrFTNr6NgIKckDQ07JWvbE+k8bF1yNrH1vuUZ58SbO/VvpXgSZsWN/OCfZltmQLN46Q5inew8E+JpbBy0yU2x1JsXyF9QdFkyneIQBwEyfzJ/XdCU7mYGzDg54S2tSW8uTorUtNZbh9IG3xIPhAJsQB7SCuFdHDXhZcxlvPLNEdqKeptGnIb/Y/39oLLrZi7xKkFQpZNTfVdrjPrR2Ke9+Zt72MlD5XP1DkldJ16ipjePGyX+5wjndv8eOwzeKnaEdnCszfceX25QI09M6kXGWT8zILqDaiUt2pFaIe3x78KI6wOt8V/9LXJrGlKfRvFH6d/H8HWJLe7EdTpyJez58o5iuJEFVzgMHl8MdiYG0hsBVmuSk2hez3izquQ++B8rtCYCrr0QOK4xaNREENFTu/sHj+lUSngvr4fAUnwLZa59LDRAZ3U6NZo3p8pbPqGHHYN9liVYHC8BBHLaXDrEW8HXrVSplNTDO8Y19MY6AtJmaqB2jx/JyC3Sn5bFYbPNRYLS/GcwiqiaEx4c7q3fEB19ISXl2IhDe8WzjRn0jTrvXe/IWgf0NrD75mBKz0NKHEEqUWZtMzalzz1s7bDy0dvRrMF3Vzx/QNQFPyQKnNKWgoE3y0Qf7llCnrUkDNiMYIlb7gOSBrtR5YBVMqkKrEmKYkuixeD0Ck5DL0pjIHNaUs3PIjFMiuDj
      STRATEGY_PRIVATE_KEY: AgBYQt65Os9CWRx3jSZ/o1DrSoIXUKA7GE2owgMyEJZQ7zhKvBD3ECxUcecde3I0OhWQNmDmV4zSK8nyyIsqj6aLc3v0QA8lf0Vohf3QD+Ds2F2FCsl3DAU4q06mJGlPirStIg7g3G1s6qoHRleb6014AaNbEMv/wDwyzXb0P80WhAKDmoD8BzWN0nZ1yuHMbqniSZ2GLKHl+TEh8Xr5vNpV5GGKnO9dryuLxcIx1A1tNkPdJJhAASny+ATUPkbLmGsbO/A4ldeJmoElFIePhhUTmJ0sPX1OTtG8QCmc5A5Vl7Bx5CANhQYPqa2qT5FsgyP6CQzrS5gNKYwXcZz+GiVNmx2scvAEVDHRCyMT5xgGdqGnPp+CBN1inRKrUXirXaM/76WxMteCIgZuqUCie3GZRNV/kus6NDMY/iD3S2/wjCivF/EOKLurEjyxFukuVr47VmSrOb1fd5FH3j4SFjOT7hFQCUQkcyR0mjjnnjhqbR5JpiqQzKNL+rva3gwhzl8eoU1SSGNMXfOXz7YZG1Ol+Jnx91NRFVRQbcGxlVAVDEUQjbVpXz8JzVQdwccr3NciiPYsItbULpM5LIX9rGanFEYgqhgq5oP6HmGFtb/BLt9Le/YUdXs36e11gak6P6m2tAD/GdszqZ2lZ5a8ytIf/Ra7z+Y7AmmHXBoxzMogsrPCwcsiH+GT0yYF53H7uWcfumw8bLOnv4ty10O5z5+BKOZOk3x8DMaL+wDl1NF2KNrvAZaJSxo1zb4aQnMyp4yDadDf+KDjey8u5AR7MVSi
      SENTRY_DNS: AgAM8jkOnm3qgAsLg8bU/QvgAG1Ju/BkluE5d0Q78tRHbop9K+YTefMmjKvEyDhQO60C9dp+nFQOTQjGyhqTZ5mZhkMyH0I1RFgK4W970eVVHrY/3sE1JNBP+ZZ9OLByesHZaNOQDp/Y9QPmv21UPGPXdy0MRvEDpqMk8KEMWZ6cEAojJ1CmfNSslXO4kqmSLIdyD8Ao4nA6+Rz9n7ufhzJXSjGreR3EwZDow24x5V9mxZwRb2lE/gwqzb+0ONhtaJBhZDQWH0JNJqKLXzsBb6BVQUxBsDr13RumhBcTzAi6nGn67hhDtJV8tku2hMb98PKsAeluXm+Jgcsnez0i2NXDl6QN50GGXJcvWDBsozGIqdSke17IkW8/wErTXoccsFrpYsz0PdWWuHOtuGGiEUBBTYAZ1JAJq9wOMYH4PjhH8iEioNqp+uzOOTfrpoHnbvamVGulALHZQdIUQVMj/EQdL+V3trefvXkMmm8wtUnG2oxDNZzh+bcpzcuM3P2dwxz1vuJybFDqGB7qMiE643xxij1GyMdDC6wEzxdiM2wRzr4CE5aYPbkft6YXOSs4RUheOvFnqlXnkoZzJ5p8OU8EwLlccKlmq1biEWFyZF1P0VKmZVvU76vPMBD5AlhNbmfv+w4YApvGq+Vcb8aKCWHghDlWGxjFb1PIrstGBtbRkAPVBNcEc/lQmFSTzFjjJP1vRDRjPvRIyaCyxJbJKtXStivphjykKpAwlrccz3qtdOD8QC6hnT58hMXZ8hgzfnobffFC77ZHQMwRRE20mbdqj/QqzLvr6ZIE
  appValues:
    CHAIN_ID: 73799
    CHAIN_NAME: volta
    NATS_ENVIRONMENT_NAME: ewf-dev
    PUBLIC_RESOLVER_ADDRESS: 0x0a97e07c4Df22e2e31872F20C5BE191D5EFc4680
    ENS_REGISTRY_ADDRESS: 0xd7CeF70Ba7efc2035256d828d5287e2D285CD1ac
    ROOT_DOMAIN: iam.ewc
    DID_REGISTRY_ADDRESS: 0xc15d5a57a8eb0e1dcbe5d88b8f9a82017e5cc4af
    CLAIM_MANAGER_ADDRESS: 0x5339adE9332A604A1c957B9bC1C6eee0Bcf7a031
    DOMAIN_NOTIFIER_ADDRESS: 0xeea658026d6CDede4380D3aD030beAC911758A93
    RESOLVER_V1_ADDRESS: 0xf5EA22c1F799d425356c2aab2004200Ab4490D2b
    RESOLVER_V2_ADDRESS: 0xcf72f16Ab886776232bea2fcf3689761a0b74EfE
    ASSETS_MANAGER_ADDRESS: 0x84d0c7284A869213CB047595d34d6044d9a7E14A
    ASSETS_SYNC_INTERVAL_IN_HOURS: 10
    ASSETS_SYNC_HISTORY_INTERVAL_IN_HOURS: 21
    ASSETS_SYNC_ENABLED: false
    DIDDOC_SYNC_INTERVAL_IN_HOURS: 12
    DID_SYNC_ENABLED: true
    DID_SYNC_MODE_FULL: false
    ENS_SYNC_INTERVAL_IN_HOURS: 11
    ENS_SYNC_ENABLED: true
    ENABLE_AUTH: true
    JWT_PRIVATE_KEY: /app/private.pem
    JWT_PUBLIC_KEY: /app/public.pem
    STRATEGY_CACHE_SERVER: https://identitycache-sandbox.energyweb.org/v1
    STRATEGY_NUM_BLOCKS_BACK: 10
    JWT_ACCESS_TOKEN_EXPIRES_IN: 15m
    JWT_REFRESH_TOKEN_EXPIRES_IN: 1h
    JWT_ACCESS_TOKEN_NAME: token
    JWT_REFRESH_TOKEN_NAME: refreshToken
    STATUS_LIST_DOMAIN: https://identitycache-sandbox.energyweb.org/v1
    CHAIN_REQUEST_ATTEMPTS: 5

  opsValues:
    DB_NAME: ics
    NODE_ENV: production
    UNIVERSAL_RESOLVER_URL: https://dev.uniresolver.io/10/identifiers/
    NATS_VERSION: 2.1.8
    NATS_CLIENTS_URL: iam-cache-server-nats.ics.svc.cluster.local:4222
    LOGS_DIRECTORY: /app/logs
    NESTJS_PORT: 3000
    IPFS_CLIENT_PORT: 5001
    IPFS_CLIENT_PROJECT_SECRET: 9506198a91243f03417aaed60e5eb654
    IPFS_CLIENT_PROJECT_ID: 2DBFBP5zsjfImw1wBPn1Vx08Yd5
    IPFS_CLIENT_HOST: ipfs.infura.io
    DB_MAXIMUM_CONNECTION_POOL: 56 # https://github.com/energywebfoundation/iam-cache-server/blob/develop/README.md#connection-pooling
    SENTRY_ENV: sandbox

  resources:
    limits:
      cpu: 750m
      memory: 1Gi
    requests:
      cpu: 500m
      # High memory request is due to DIDKit usage https://github.com/spruceid/didkit/issues/301
      # We anticipate memory usage to decrease once node v18 is used
      memory: 900Mi

  autoscaling:
    enabled: true
    minReplicas: 3
    maxReplicas: 3
    targetCPUUtilizationPercentage: 50
    targetMemoryUtilizationPercentage: 85

  nodeSelector: { }

  tolerations: [ ]

  affinity: { }
